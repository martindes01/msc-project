\chapter{The Project Repository}
\label{app:repository}

\begin{figure}
  \centering
  \input{figures/repository/structure.tex}%
  \caption{Overview of the repository structure}
  \label{fig:respostiory-structure}
\end{figure}

The project repository can be found at \url{https://git-teaching.cs.bham.ac.uk/mod-msc-proj-2020/mld705}.
An overview of its structure is given in \cref{fig:respostiory-structure}.
The root directory is split into two subdirectories.
The \lstinline{docs} subdirectory contains the \LaTeX{} source for the project proposal, various presentations and this dissertation.
The \lstinline{src} subdirectory contains the implementation library.
This follows the standard Gradle project structure for a Java library.
The Gradle~7.1.1 wrappers (\lstinline{gradlew} on Unix and \lstinline{gradlew.bat} on Windows) are provided so that the project can be built and tested without an existing Gradle installation, although an installation of the Java Development Kit between versions~11 and~16, inclusive, is required.
It is assumed that the \lstinline{JAVA\_HOME} and \lstinline{PATH} environment variables are correctly set.
The project settings file \lstinline{settings.gradle} declares the existence of the library subproject in the \lstinline{lib} directory.
This contains two source sets, whose structures follow the package hierarchy.
The \lstinline{main} source set consists of the \lstinline{summaries} implementation package, the \lstinline{wrappers.spark} convenience package, and a \lstinline{utils} package that comprises the \lstinline{Math} utility class, the \lstinline{HashFunction} functional interface and its \lstinline{LinearHashFunction} implementation.
The build script \lstinline{build.gradle} defines the dependencies and build tasks of the project, including the tasks used to evaluate the summary implementations.

The list of build tasks can be obtained by running \lstinline{./gradlew tasks} from the top-level \lstinline{src} directory.
Each of the tasks listed can be run using \lstinline{./gradlew <task>}.
The library can be compiled by running the \lstinline{build} task, and comprehensive documentation of the public API can be generated by running the \lstinline{javadoc} task.
This will write the generated documentation to \lstinline{src/lib/build/docs/javadoc}.

The available test tasks are \lstinline{testFingerprintAccuracy}, \lstinline{testFingerprintPerformance}, \lstinline{testCountSketchAccuracy}, \lstinline{testCountSketchPerformance}, \lstinline{testDyadicCountSketchAccuracy} and \lstinline{testDyadicCountSketchPerformance}.
Running these tasks on Windows requires the \lstinline{hadoop.dll} and \lstinline{winutils.exe} binary files corresponding to Apache~Hadoop~3.2 to be available on the system path.
These files are most readily obtainable from \url{https://github.com/cdarlint/winutils}.
Additionally, the \lstinline{HADOOP\_HOME} environment variable should be set such that \lstinline{HADOOP\_HOME\textbackslash{}bin\textbackslash{}winutils.exe} correctly identifies the \lstinline{winutils.exe} executable.

Each test task can be run using the command-line instruction given in \cref{lst:repository-test-instruction}.
This takes a list of key--value options, in which each value is joined to its key by the assignment symbol (\lstinline{=}), and each option is separated from the next by white space.
The available options are listed in \cref{tab:repository-test-options}, which shows the default values of global options.
While all options have a default value, some of these are specific to individual summaries.
Note that since the test tasks were developed solely for the generation of results for the dissertation, no sanitization or error checking is performed on the command-line options.
To avoid errors, ensure that there are no extraneous spaces and that each numerical value is given in a format recognized by \lstinline{Integer.parseInt}~\citep{o14}.

\begin{lstlisting}[
  float,
  caption = {Format of the test command-line instruction},
  label = {lst:repository-test-instruction},
]
./gradlew <test> [--project-prop options="<options>"]
\end{lstlisting}

\begin{table}
  \centering
  \caption{Available test options}
  \label{tab:repository-test-options}
  \input{tables/repository/test-options.tex}%
\end{table}
